<% if flash[:message] %>
    <div class="alert alert-success"><%= flash[:message] %></div>
<% end %>

<div class="row">
  <aside class="col-md-4">
    <section>
      <%= render partial: 'userinfo', locals: {user: @user} %>
    </section>
    <hr>
    <section>
      <div><%= link_to "Friends (#{@user.friends.count})", users_path %></div>
      <% if @user.friend_with?(current_user) %>
        <div><%= link_to 'Unfriend', connection_path(@connection), method: :delete, data: { confirm: "You sure?" }, class: 'btn btn-primary btn-sm'%></div>
      <% elsif @user.not_a_friend?(current_user) %>
        <%= render partial: 'connections/form', locals: {friend: @user, connection: Connection.new} %>
      <% elsif @user == current_user %>
        <div><%= link_to "Messages (#{@allmessages})", user_messages_path(@user)%></div>
        <div><%= link_to "Create a new post", new_user_post_path(@user) %></div>
        <div><%= link_to 'Update Profile', edit_user_path(@user) %></div>
      <% end %>
    </section>
  </aside>
  <div class="col-md-7">
    <%= render partial: 'posts/userposts', locals: {user: @user} %>
  </div>
</div>
